[
  {
    "objectID": "slides-container.html",
    "href": "slides-container.html",
    "title": "üìΩÔ∏è Slides",
    "section": "",
    "text": "Click on the slide and press F key to go fullscreen or open the slides in new tab.\n\n\n\nCitationBibTeX citation:@online{kotov2025,\n  author = {Kotov, Egor},\n  title = {AGIT 2025 {Workshop:} {Analysing} {Massive} {Open} {Human}\n    {Mobility} {Data} in {R} {Using} Spanishoddata, Duckdb and Flowmaps},\n  date = {2025-07-03},\n  url = {https://www.ekotov.pro/agit-2025-spanishoddata/slides-container.html},\n  doi = {10.5281/zenodo.15794849},\n  langid = {en}\n}\nFor attribution, please cite this work as:\nKotov, Egor. 2025. ‚ÄúAGIT 2025 Workshop: Analysing Massive Open\nHuman Mobility Data in R Using Spanishoddata, Duckdb and\nFlowmaps.‚Äù July 3, 2025. https://doi.org/10.5281/zenodo.15794849.",
    "crumbs": [
      "üìΩÔ∏è Slides"
    ]
  },
  {
    "objectID": "1-mobility-data.html#get-the-zone-boundaries-data",
    "href": "1-mobility-data.html#get-the-zone-boundaries-data",
    "title": "üìä Tutorial: Get & Aggregate Mobility Data",
    "section": "2.1 Get the zone boundaries data",
    "text": "2.1 Get the zone boundaries data\n\nzones &lt;- spod_get_zones(zones = \"districts\", ver = 2)\n\n\nglimpse(zones)\n\nRows: 3,909\nColumns: 10\n$ id                   &lt;chr&gt; \"01001\", \"01002\", \"01004_AM\", \"01009_AM\", \"01010\", \"01017_AM\", \"01028_AM\", \"01‚Ä¶\n$ name                 &lt;chr&gt; \"Alegr√≠a-Dulantzi\", \"Amurrio\", \"Artziniega agregacion de municipios\", \"Asparre‚Ä¶\n$ population           &lt;dbl&gt; 2925, 10307, 3005, 4599, 2951, 4314, 7515, 18009, 3418, 3771, 5029, 2636, 4466‚Ä¶\n$ census_sections      &lt;chr&gt; \"0100101001; 0100101002\", \"0100201001; 0100201002; 0100201003; 0100201004; 010‚Ä¶\n$ census_districts     &lt;chr&gt; \"0100101\", \"0100201\", \"0100401; 0104201\", \"0100901; 0101301; 0102101; 0102701;‚Ä¶\n$ municipalities       &lt;chr&gt; \"01001\", \"01002\", \"01004; 01042\", \"01009; 01013; 01021; 01027; 01053; 01061\", ‚Ä¶\n$ municipalities_mitma &lt;chr&gt; \"01001\", \"01002\", \"01004_AM\", \"01009_AM\", \"01010\", \"01017_AM\", \"01028_AM\", \"01‚Ä¶\n$ luas_mitma           &lt;chr&gt; \"01001\", \"01002\", \"01004_AM\", \"01009_AM\", \"01010\", \"01017_AM\", \"01028_AM\", \"01‚Ä¶\n$ district_ids_in_v1   &lt;chr&gt; \"01001_AM\", \"01002\", \"01010_AM\", \"01001_AM\", \"01010_AM\", \"01043_AM\", \"01031_AM‚Ä¶\n$ geometry             &lt;MULTIPOLYGON [m]&gt; MULTIPOLYGON (((538090.2 47..., MULTIPOLYGON (((501984.9 47..., M‚Ä¶\n\ngg_zones &lt;- zones |&gt;\n  st_simplify(dTolerance = 400) |&gt;\n  ggplot() +\n  geom_sf(linewidth = 0.2)\n\ngg_zones\n\n\n\n\nMITMS data zone boundaries",
    "crumbs": [
      "üìä Tutorial: Get & Aggregate Mobility Data"
    ]
  },
  {
    "objectID": "1-mobility-data.html#get-the-flows-data",
    "href": "1-mobility-data.html#get-the-flows-data",
    "title": "üìä Tutorial: Get & Aggregate Mobility Data",
    "section": "2.2 Get the flows data",
    "text": "2.2 Get the flows data\n\n2.2.1 Define the dates\nLet us get a few days of data. We will investigate the days when the city of Valencia was flooded.\nWe can get all dates that are available in the data:\n\navailable_dates &lt;- spod_get_valid_dates(ver = 2)\n\nAnd check if the dates of interest exist in the available data range:\n\ndates &lt;- seq(ymd(\"2024-10-27\"), ymd(\"2024-11-02\"), by = \"day\")\nall(dates %in% available_dates)\n\nTRUE\nWe can also check if the data is available for the weeks before and after the flood:\n\ndates &lt;- seq(ymd(\"2024-10-20\"), ymd(\"2024-11-09\"), by = \"day\")\nall(dates %in% available_dates)\n\nFALSE\nOne date is missing:\n\ndates[which(!dates %in% available_dates)]\n\n\"2024-11-09\"\n\n\n\n\n\n\nWarning\n\n\n\nDue to mobile network outages, the data on certain dates is missing. Kindly keep this in mind when calculating mean monthly or weekly flows.\nPlease check the original data page for currently known missing dates. You can use spod_get_valid_dates() function to get all available dates as shown above.\n\n\nBut that is fine, we still have the data for several days before and after.\n\n\n2.2.2 Define the type of data and spatial scale\nThe Spanish mobility data (Ministerio de Transportes y Movilidad Sostenible (MITMS) 2024) contains several different datasets with different spatial scales and types of data, such as overnight stays, resident population counts and more. We will focus on origin-destination flows data for the most detailed spatial resolution.\nLet us get the origin-destination flows for:\n\na day on the week before the flood\na day immidiately after the flood\na day of the week following the flood\na day one month after the flood\n\n\ndates &lt;- c(\"2024-10-23\", \"2024-10-30\", \"2024-11-06\", \"2024-11-27\")\nall(dates %in% available_dates)\n\nTRUE\n\n\n2.2.3 Get the data\nThe code below will download the requested dates and create the flows table.\n\nflows &lt;- spod_get(\n  type = \"origin-destination\",\n  zones = \"districts\",\n  dates = dates\n)\n\n\n\n\n\n\n\nNote\n\n\n\nFor the 4 requested dates, the spod_get() call above will download just under 1 GB of data. If you need to download more days, you will have to set the max_download_size_gb argument in spod_get(). This is a precaution against downloading too much data at once.\n\n\n\n\n\n\n\n\nTip\n\n\n\nspod_download() can be used with the same arguments to simply pre-download the data without setting it up as a table.\n\n\nYou can now print the table to preview it:\n\nflows\n\n# Source:   table&lt;od_csv_clean_filtered&gt; [?? x 20]\n# Database: DuckDB v1.2.1 [root@Darwin 24.4.0:R 4.5.0/:memory:]\n   date        hour id_origin id_destination distance activity_origin   activity_destination\n   &lt;date&gt;     &lt;int&gt; &lt;fct&gt;     &lt;fct&gt;          &lt;fct&gt;    &lt;fct&gt;             &lt;fct&gt;               \n 1 2024-11-27    13 01001     01001          0.5-2    frequent_activity home                \n 2 2024-11-27    17 01001     01001          0.5-2    frequent_activity home                \n 3 2024-11-27    14 01002     01001          10-50    frequent_activity home                \n 4 2024-11-27     1 01009_AM  01001          10-50    frequent_activity home                \n 5 2024-11-27     6 01009_AM  01001          10-50    frequent_activity home                \n 6 2024-11-27     8 01009_AM  01001          10-50    frequent_activity home                \n 7 2024-11-27    11 01009_AM  01001          10-50    frequent_activity home                \n 8 2024-11-27    17 01009_AM  01001          10-50    frequent_activity home                \n 9 2024-11-27    18 01009_AM  01001          10-50    frequent_activity home                \n10 2024-11-27    19 01009_AM  01001          10-50    frequent_activity home                \n# ‚Ñπ more rows\n# ‚Ñπ 13 more variables: study_possible_origin &lt;lgl&gt;, study_possible_destination &lt;lgl&gt;,\n#   residence_province_ine_code &lt;fct&gt;, residence_province_name &lt;fct&gt;, income &lt;fct&gt;, age &lt;fct&gt;, sex &lt;fct&gt;,\n#   n_trips &lt;dbl&gt;, trips_total_length_km &lt;dbl&gt;, year &lt;int&gt;, month &lt;int&gt;, day &lt;int&gt;, time_slot &lt;int&gt;\n# ‚Ñπ Use `print(n = ...)` to see more rows\nOr use glimpse() to view its structure:\n\nglimpse(flows)\n\n\n\n\n\n\n\nTip\n\n\n\nstr() and summary() will not work on this data in a way that you might expect, as it is not an ordinary data.frame, but a special tbl_* table object that is actually powered by DuckDB via {duckdb} R package in the background, but pretends to be a tibble (from {tibble}/{dplyr}/{tidyverse}).\n\nclass(flows)\n\n[1] \"tbl_duckdb_connection\" \"tbl_dbi\"               \"tbl_sql\"              \n[4] \"tbl_lazy\"              \"tbl\"   \n\n\nRows: ??\nColumns: 20          \nDatabase: DuckDB v1.2.1 [root@Darwin 24.4.0:R 4.5.0/:memory:]\n$ date                        &lt;date&gt; 2024-11-27, 2024-11-27, 2024-11-27, 2024-11-27, 2024-11-27, 2024-11-27‚Ä¶\n$ hour                        &lt;int&gt; 13, 17, 14, 1, 6, 8, 11, 17, 18, 19, 22, 23, 14, 15, 19, 10, 12, 14, 19‚Ä¶\n$ id_origin                   &lt;fct&gt; 01001, 01001, 01002, 01009_AM, 01009_AM, 01009_AM, 01009_AM, 01009_AM, ‚Ä¶\n$ id_destination              &lt;fct&gt; 01001, 01001, 01001, 01001, 01001, 01001, 01001, 01001, 01001, 01001, 0‚Ä¶\n$ distance                    &lt;fct&gt; 0.5-2, 0.5-2, 10-50, 10-50, 10-50, 10-50, 10-50, 10-50, 10-50, 10-50, 1‚Ä¶\n$ activity_origin             &lt;fct&gt; frequent_activity, frequent_activity, frequent_activity, frequent_activ‚Ä¶\n$ activity_destination        &lt;fct&gt; home, home, home, home, home, home, home, home, home, home, home, home,‚Ä¶\n$ study_possible_origin       &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, F‚Ä¶\n$ study_possible_destination  &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, F‚Ä¶\n$ residence_province_ine_code &lt;fct&gt; 01, 01, 01, 01, 01, 01, 01, 01, 01, 01, 01, 01, 01, 01, 01, 01, 01, 01,‚Ä¶\n$ residence_province_name     &lt;fct&gt; \"Araba/√Ålava\", \"Araba/√Ålava\", \"Araba/√Ålava\", \"Araba/√Ålava\", \"Araba/√Ålav‚Ä¶\n$ income                      &lt;fct&gt; 10-15, 10-15, 10-15, 10-15, 10-15, 10-15, 10-15, 10-15, 10-15, 10-15, 1‚Ä¶\n$ age                         &lt;fct&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,‚Ä¶\n$ sex                         &lt;fct&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,‚Ä¶\n$ n_trips                     &lt;dbl&gt; 2.465, 2.465, 4.755, 4.755, 2.390, 4.755, 2.390, 2.465, 7.145, 4.755, 2‚Ä¶\n$ trips_total_length_km       &lt;dbl&gt; 4.678, 4.678, 218.331, 51.022, 29.603, 51.022, 34.586, 30.861, 106.426,‚Ä¶\n$ year                        &lt;int&gt; 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2024, 2024,‚Ä¶\n$ month                       &lt;int&gt; 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11,‚Ä¶\n$ day                         &lt;int&gt; 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27,‚Ä¶\n$ time_slot                   &lt;int&gt; 13, 17, 14, 1, 6, 8, 11, 17, 18, 19, 22, 23, 14, 15, 19, 10, 12, 14, 19‚Ä¶\n\n\n\n\n\n\nTip\n\n\n\nThe meaning of all the variables is explained in the codebook.\n\n\n\n\n\n\n\n\nTip\n\n\n\nIf for your analysis, only need total daily flows between municipalties without any extra information, you can save time by getting pre-aggregated reduced size data directly from the interactive map hosted by the Ministry of Transport and Sustainable Mobility. To do this, kindly refer to the ‚ÄúQuicky get daily data‚Äù vignette. However, this is not recommended for studies that require the code to be reproducible, as the API may change at any time. You can use this functionality for quick mobility estimates and in classroom for experiments.\n\n\n\n\n2.2.4 Data verification\nWhen mobility data files are downloaded with spod_get() or spod_download(), they are automatically checked by file size against known size of the remote files to prevent currupted downloads and preserve data integrity. However, if you would like to do an extra check you can use spod_check_files() with the same arguments you used for spod_get() or spod_download().\n\nfile_check &lt;- spod_check_files(\n  type = \"origin-destination\",\n  zones = \"districts\",\n  dates = dates\n)\n\nData version detected from dates: 2\nUsing existing disk cache: /path/to/your/working/dir/data/metadata_cache/metadata_s3_v2_2025-07-02.rds\nAll checked files are consistent.\n\nall(file_check$local_file_consistent)\n\nTRUE\nIf the some files were corrupted, you could easily find out which ones with:\n\nfile_check |&gt;\n  filter(local_file_consistent == FALSE)\n\nAnd you would be able to fix this by simply re-running the call to spod_get() or spod_download().",
    "crumbs": [
      "üìä Tutorial: Get & Aggregate Mobility Data"
    ]
  },
  {
    "objectID": "1-mobility-data.html#aggregation-examples",
    "href": "1-mobility-data.html#aggregation-examples",
    "title": "üìä Tutorial: Get & Aggregate Mobility Data",
    "section": "3.1 Aggregation examples",
    "text": "3.1 Aggregation examples\n\n3.1.1 Count the total number of over all days\n\nflows |&gt;\n  summarise(\n    n_trips = sum(n_trips, na.rm = TRUE),\n    .groups = \"drop\"\n  ) |&gt;\n  collect()\n\n# A tibble: 1 √ó 1    \n     n_trips\n       &lt;dbl&gt;\n1 591212295.\n\n\n3.1.2 Count total number of trips per day\n\nflows |&gt;\n  group_by(date) |&gt;\n  summarise(\n    n_trips = sum(n_trips, na.rm = TRUE),\n    .groups = \"drop\"\n  ) |&gt;\n  collect()\n\n# A tibble: 4 √ó 2    \n  date          n_trips\n  &lt;date&gt;          &lt;dbl&gt;\n1 2024-10-23 148427847.\n2 2024-11-27 148479109.\n3 2024-11-06 149441508.\n4 2024-10-30 144863831.\n\n\n3.1.3 Count total number of work trips in the morning hours by women vs men\n\nm_vs_f_morning_commute &lt;- flows |&gt;\n  filter(!is.na(sex), hour %in% 6:10) |&gt;\n  group_by(date, sex) |&gt;\n  summarise(\n    n_trips = sum(n_trips, na.rm = TRUE),\n    .groups = \"drop\"\n  ) |&gt;\n  arrange(date, sex) |&gt;\n  collect()\n\nm_vs_f_morning_commute\n\n# A tibble: 8 √ó 3\n  date       sex      n_trips\n  &lt;date&gt;     &lt;fct&gt;      &lt;dbl&gt;\n1 2024-10-23 female 11481768.\n2 2024-10-23 male   10736460.\n3 2024-10-30 female 11335501.\n4 2024-10-30 male   10596445.\n5 2024-11-06 female 11458701.\n6 2024-11-06 male   10719684.\n7 2024-11-27 female 11488244.\n8 2024-11-27 male   10740725.\nPlot it\n\nm_vs_f_morning_commute_plot &lt;- m_vs_f_morning_commute |&gt;\n  ggplot(aes(x = date, y = n_trips, color = sex)) +\n  geom_line() +\n  theme_light() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))",
    "crumbs": [
      "üìä Tutorial: Get & Aggregate Mobility Data"
    ]
  },
  {
    "objectID": "slides.html#what-we-will-do-today-1",
    "href": "slides.html#what-we-will-do-today-1",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "What we will do today?",
    "text": "What we will do today?\n\nexplore data\ndiscuss insights, idea and limitations\npotentially co-author a workshop-report short paper (in less than 2 weeks, strict deadline) with some visualisations and insights"
  },
  {
    "objectID": "slides.html#survey-based-human-mobility",
    "href": "slides.html#survey-based-human-mobility",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Survey-based human mobility",
    "text": "Survey-based human mobility\nEuropean Labour Force Surveys\n\n\nSource: https://ec.europa.eu/eurostat/web/microdata/european-union-labour-force-survey  Image source: https://ec.europa.eu/eurostat/documents/345175/17780010/2021-NUTS-3-map-ES.pdf"
  },
  {
    "objectID": "slides.html#survey-based-human-mobility-1",
    "href": "slides.html#survey-based-human-mobility-1",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Survey-based human mobility",
    "text": "Survey-based human mobility\nGerman Mobility Survey\n\n\nSource: https://www.mobilitaet-in-deutschland.de/"
  },
  {
    "objectID": "slides.html#census-based-human-mobility",
    "href": "slides.html#census-based-human-mobility",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Census-based human mobility",
    "text": "Census-based human mobility\nUK Census\n\n\nSource: https://commute.datashine.org.uk/"
  },
  {
    "objectID": "slides.html#census-based-human-mobility-1",
    "href": "slides.html#census-based-human-mobility-1",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Census-based human mobility",
    "text": "Census-based human mobility\nUK Census\n\n\nSource: https://commute.datashine.org.uk/"
  },
  {
    "objectID": "slides.html#register-based-human-mobility",
    "href": "slides.html#register-based-human-mobility",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Register-based human mobility",
    "text": "Register-based human mobility\nNetherlands Register Data\n\n\nSource: https://www.flowmap.blue/1Oe3zM219uSfJ3sjdRT90SAK2kU3xIvzdcCW6cwTsAuc  Data: https://opendata.cbs.nl/#/CBS/nl/dataset/83628NED/table?dl=F076"
  },
  {
    "objectID": "slides.html#iot-gps-data",
    "href": "slides.html#iot-gps-data",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "IOT GPS Data",
    "text": "IOT GPS Data\nThe Volkswagen leak\n\n\nSource: https://media.ccc.de/v/38c3-wir-wissen-wo-dein-auto-steht-volksdaten-von-volkswagen"
  },
  {
    "objectID": "slides.html#mobile-apps-mobile-network-gps-data",
    "href": "slides.html#mobile-apps-mobile-network-gps-data",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Mobile Apps + Mobile Network GPS Data",
    "text": "Mobile Apps + Mobile Network GPS Data\nApp usage by Orange customers in France\n\n\nImage source: Mart√≠nez-Durive et al. (2023)"
  },
  {
    "objectID": "slides.html#mobile-phone-data",
    "href": "slides.html#mobile-phone-data",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Mobile phone data",
    "text": "Mobile phone data\nFlowminder\n\nMobile phone data for humanitarian and development efforts in low- and middle-income countries\n\nSource: https://www.flowminder.org/what-we-do/population-distribution-and-mobility-analysis#data-applications"
  },
  {
    "objectID": "slides.html#flowminder-software",
    "href": "slides.html#flowminder-software",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Flowminder Software",
    "text": "Flowminder Software\nFlowKit - privacy preserving mobile phone data aggregation\n\n\nLearn more: https://github.com/Flowminder/FlowKit,  https://www.flowminder.org/what-we-do/mobile-data-partnerships/flowkit"
  },
  {
    "objectID": "slides.html#spanish-open-mobility-big-data-1",
    "href": "slides.html#spanish-open-mobility-big-data-1",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Spanish Open Mobility Big Data",
    "text": "Spanish Open Mobility Big Data\n~ 5 years of daily hourly flows\n\n\n\n\n\n\n\nData by Ministerio de Transportes y Movilidad Sostenible (MITMS) (2024)\nBased on 13 million customers of Orange Spain, expanded to full population of Spain\nData interface"
  },
  {
    "objectID": "slides.html#spanish-open-mobility-big-data-2",
    "href": "slides.html#spanish-open-mobility-big-data-2",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Spanish Open Mobility Big Data",
    "text": "Spanish Open Mobility Big Data\n3500+ zones across Spain and beyond\n\n\n\n\n\n\n\nData by Ministerio de Transportes y Movilidad Sostenible (MITMS) (2024)\nBased on 13 million customers of Orange Spain, expanded to full population of Spain\nData interface"
  },
  {
    "objectID": "slides.html#spanish-open-mobility-big-data-3",
    "href": "slides.html#spanish-open-mobility-big-data-3",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Spanish Open Mobility Big Data",
    "text": "Spanish Open Mobility Big Data\n\n\nView the dashboard at https://data.transportes.gob.es/public/mov-diaria-mensual"
  },
  {
    "objectID": "slides.html#spanish-open-mobility-big-data-4",
    "href": "slides.html#spanish-open-mobility-big-data-4",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Spanish Open Mobility Big Data",
    "text": "Spanish Open Mobility Big Data\n\n\nView the dashboard at https://data.transportes.gob.es/public/mov-provincial"
  },
  {
    "objectID": "slides.html#spanish-open-mobility-big-data-5",
    "href": "slides.html#spanish-open-mobility-big-data-5",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Spanish Open Mobility Big Data",
    "text": "Spanish Open Mobility Big Data\n\n\nView the dashboard at https://mapas-movilidad.transportes.gob.es/?date=2025-04-16T22"
  },
  {
    "objectID": "slides.html#spanish-open-mobility-big-data-6",
    "href": "slides.html#spanish-open-mobility-big-data-6",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Spanish Open Mobility Big Data",
    "text": "Spanish Open Mobility Big Data\nAcademic research\n\n\nSource: https://github.com/e-kotov/spanishoddata-paper-supplement  https://doi.org/10.5281/zenodo.15207374"
  },
  {
    "objectID": "slides.html#spanish-open-mobility-big-data-7",
    "href": "slides.html#spanish-open-mobility-big-data-7",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Spanish Open Mobility Big Data",
    "text": "Spanish Open Mobility Big Data\nEffects of human mobility on dispersal of disease-transmitting mosquitoes\n\n\n\n\nUses Labour Force Survey data(Lucati et al. 2022)\n\n\n\n\nBuilds on previous research using mobile phone based data(Kotov, Bartumeus, and Palmer 2024)"
  },
  {
    "objectID": "slides.html#multi-mno-project-1",
    "href": "slides.html#multi-mno-project-1",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Multi-MNO Project",
    "text": "Multi-MNO Project\n\n\nSource: https://cros.ec.europa.eu/landing-page/multi-mno-project"
  },
  {
    "objectID": "slides.html#multi-mno-project-2",
    "href": "slides.html#multi-mno-project-2",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Multi-MNO Project",
    "text": "Multi-MNO Project\nMobility data aggregation using unified methodology\n\n\n\n\n![](media/mobility-data-slides/tf-mno-position-paper.png\n\n\nSource: https://cros.ec.europa.eu/system/files/2023-12/20231109_dimeitdg_mnoposition_paper_ricciato_ho%20%281%29.pdf  Learn more: https://ec.europa.eu/eurostat/web/products-statistical-reports/w/ks-ft-23-001"
  },
  {
    "objectID": "slides.html#multi-mno-project-3",
    "href": "slides.html#multi-mno-project-3",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Multi-MNO Project",
    "text": "Multi-MNO Project\nHow it works\n\n\nSource https://cros.ec.europa.eu/system/files/2024-02/20240226_MultiMNO_2021-0400-internal-meeting-MNOs-ricciato.pdf"
  },
  {
    "objectID": "slides.html#multi-mno-software",
    "href": "slides.html#multi-mno-software",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Multi-MNO Software",
    "text": "Multi-MNO Software\nhttps://github.com/eurostat/multimno\n\n\nSource https://cros.ec.europa.eu/system/files/2024-02/20240226_MultiMNO_2021-0400-internal-meeting-MNOs-ricciato.pdf"
  },
  {
    "objectID": "slides.html#multi-mno-outputs",
    "href": "slides.html#multi-mno-outputs",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Multi-MNO Outputs",
    "text": "Multi-MNO Outputs\nWhat to expect?\n\n\nSource https://cros.ec.europa.eu/system/files/2024-02/20240226_MultiMNO_2021-0400-internal-meeting-MNOs-ricciato.pdf"
  },
  {
    "objectID": "slides.html#spanishoddata",
    "href": "slides.html#spanishoddata",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "spanishoddata",
    "text": "spanishoddata\naccess Spanish Open Mobility Big Data from R\n\n\nSource: https://ropenspain.github.io/spanishoddata/articles/v1-2020-2021-mitma-data-codebook.html"
  },
  {
    "objectID": "slides.html#spanishoddata---access-open-human-mobility-data",
    "href": "slides.html#spanishoddata---access-open-human-mobility-data",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "spanishoddata - access open human mobility data",
    "text": "spanishoddata - access open human mobility data\nA package with many companions\n\n\n\n  \n  \n    \n  \n\n  \n  \n    \n  \n\n  \n  \n    \n  \n\n\n    \n  \n\n\n\n\nDetailed documentation\n\n\n\nLogos are the property of their respective owners."
  },
  {
    "objectID": "slides.html#spanishoddata-use-cases",
    "href": "slides.html#spanishoddata-use-cases",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "spanishoddata use cases",
    "text": "spanishoddata use cases\nSplit work and non-work trips\n\n\n\n\nSource: https://github.com/e-kotov/2024-30DayMapChallenge"
  },
  {
    "objectID": "slides.html#spanishoddata-use-cases-1",
    "href": "slides.html#spanishoddata-use-cases-1",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "spanishoddata use cases",
    "text": "spanishoddata use cases\nSplit into different trip types\n\n\nSource: https://github.com/e-kotov/spanishoddata-paper-supplement, https://doi.org/10.5281/zenodo.15207374"
  },
  {
    "objectID": "slides.html#spanishoddata-use-cases-2",
    "href": "slides.html#spanishoddata-use-cases-2",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "spanishoddata use cases",
    "text": "spanishoddata use cases\nSplit into different trip types\n\n\nSource: https://github.com/e-kotov/spanishoddata-paper-supplement, https://doi.org/10.5281/zenodo.15207374"
  },
  {
    "objectID": "slides.html#get-the-data",
    "href": "slides.html#get-the-data",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Get the data",
    "text": "Get the data\nDownload one by one?"
  },
  {
    "objectID": "slides.html#get-the-data-1",
    "href": "slides.html#get-the-data-1",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Get the data",
    "text": "Get the data\nWrite your own XML parser?"
  },
  {
    "objectID": "slides.html#get-the-data-2",
    "href": "slides.html#get-the-data-2",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Get the data",
    "text": "Get the data\n\n\nTime consuming options\n\n\n\nDownload one by one?\n\n\n\n\n\nWrite your own XML parser?\n\n\n\n\nCustom code to download and import multiple days\nVariable names in Spanish\nNo gurantee of consistent variable types\nLimited by available memory\nSlow data processing (raw csv data)\n\n\n::::"
  },
  {
    "objectID": "slides.html#get-the-data-3",
    "href": "slides.html#get-the-data-3",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Get the data",
    "text": "Get the data\n\n\nTime consuming options\n\n\n\nDownload one by one?\n\n\n\n\n\nWrite your own XML parser?\n\n\n\nThe fastest way\nUse {spanishoddata} package\nlibrary(spanishoddata)\nspod_set_data_dir(\"data\")\n\nod_data &lt;- spod_get(\n  type = \"origin-destination\",\n  zones = \"districts\",\n  dates = c(\n    start = \"2022-03-01\",\n    end = \"2022-03-07\"\n  )\n)"
  },
  {
    "objectID": "slides.html#get-the-data-4",
    "href": "slides.html#get-the-data-4",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Get the data",
    "text": "Get the data\n\n\nThe fastest way\nUse {spanishoddata} package\nlibrary(spanishoddata)\nspod_set_data_dir(\"data\")\n\nod_data &lt;- spod_get(\n  type = \"origin-destination\",\n  zones = \"districts\",\n  dates = c(\n    start = \"2022-01-01\",\n    end = \"2022-01-04\"\n  )\n)\n\n\nlibrary(dplyr)\nglimpse(od_data)\n\nRows: ??\nColumns: 20          \nDatabase: DuckDB v1.2.1 [root@Darwin 24.4.0:R 4.5.0/:memory:]\n$ date                        &lt;date&gt; 2022-01-04, 2022-01-04, 2‚Ä¶\n$ hour                        &lt;int&gt; 0, 0, 0, 1, 1, 3, 4, 4, 5,‚Ä¶\n$ id_origin                   &lt;fct&gt; 01001, 01001, 01001, 01001‚Ä¶\n$ id_destination              &lt;fct&gt; 01009_AM, 01009_AM, 01009_‚Ä¶\n$ distance                    &lt;fct&gt; 2-10, 2-10, 2-10, 2-10, 2-‚Ä¶\n$ activity_origin             &lt;fct&gt; home, frequent_activity, w‚Ä¶\n$ activity_destination        &lt;fct&gt; frequent_activity, home, h‚Ä¶\n$ study_possible_origin       &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE‚Ä¶\n$ study_possible_destination  &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE‚Ä¶\n$ residence_province_ine_code &lt;fct&gt; 01, 01, 01, 01, 01, 01, 01‚Ä¶\n$ residence_province_name     &lt;fct&gt; \"Araba/√Ålava\", \"Araba/√Ålav‚Ä¶\n$ income                      &lt;fct&gt; 10-15, &gt;15, &gt;15, &gt;15, &gt;15,‚Ä¶\n$ age                         &lt;fct&gt; NA, NA, NA, NA, NA, NA, NA‚Ä¶\n$ sex                         &lt;fct&gt; NA, NA, NA, NA, NA, NA, NA‚Ä¶\n$ n_trips                     &lt;dbl&gt; 4.894, 1.779, 1.094, 1.094‚Ä¶\n$ trips_total_length_km       &lt;dbl&gt; 27.966, 5.997, 4.081, 4.16‚Ä¶\n$ year                        &lt;int&gt; 2022, 2022, 2022, 2022, 20‚Ä¶\n$ month                       &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1,‚Ä¶\n$ day                         &lt;int&gt; 4, 4, 4, 4, 4, 4, 4, 4, 4,‚Ä¶"
  },
  {
    "objectID": "slides.html#duckdb-in-action",
    "href": "slides.html#duckdb-in-action",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "DuckDB in Action",
    "text": "DuckDB in Action\nImagine a typical laptop\n\n\n\n\n\n\n\n\n\nLogos are the property of their respective owners.\nOnly for illustration purposes. May not accurately represent actual GB usage and DuckDB operation."
  },
  {
    "objectID": "slides.html#duckdb-in-action-1",
    "href": "slides.html#duckdb-in-action-1",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "DuckDB in Action",
    "text": "DuckDB in Action\nFilter and summary\n\n\n\nlibrary(dplyr)\n\nod_data |&gt;\n  filter(\n    year == 2022,\n    month %in% c(2, 3, 4)\n    ) |&gt;\n  summarise(\n    n_trips = mean(n_trips)\n  ) |&gt;\n  collect()\n\n\n\n\n\n\nLogos are the property of their respective owners.\nOnly for illustration purposes. May not accurately represent actual GB usage and DuckDB operation."
  },
  {
    "objectID": "slides.html#duckdb-in-action-2",
    "href": "slides.html#duckdb-in-action-2",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "DuckDB in Action",
    "text": "DuckDB in Action\nSummary on full data set\n\n\n\nlibrary(dplyr)\n\nod_data |&gt;\n  summarise(\n    n_trips = mean(n_trips)\n  ) |&gt;\n  collect()\n\n\n\n\n\n\nLogos are the property of their respective owners.\nOnly for illustration purposes. May not accurately represent actual GB usage and DuckDB operation."
  },
  {
    "objectID": "slides.html#duckdb-in-action-3",
    "href": "slides.html#duckdb-in-action-3",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "DuckDB in Action",
    "text": "DuckDB in Action\nSummary over multiple groups on full data set\n\n\n\nlibrary(dplyr)\n\nod_data |&gt;\n  group_by(\n    year,\n    month,\n    day,\n    id_origin,\n    id_destination\n  )\n  summarise(\n    n_trips = mean(n_trips)\n  ) |&gt;\n  collect()\n\n\n\n\n\n\nLogos are the property of their respective owners.\nOnly for illustration purposes. May not accurately represent actual GB usage and DuckDB operation."
  },
  {
    "objectID": "slides.html#duckdb-in-action-4",
    "href": "slides.html#duckdb-in-action-4",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "DuckDB in Action",
    "text": "DuckDB in Action\nSummary over multiple groups on full data set\n\n\n\nlibrary(dplyr)\n\nod_data |&gt;\n  group_by(\n    year,\n    month,\n    day,\n    id_origin,\n    id_destination\n  )\n  summarise(\n    n_trips = mean(n_trips)\n  ) |&gt;\n  collect()\n\n\n\n\n\n\nLogos are the property of their respective owners.\nOnly for illustration purposes. May not accurately represent actual GB usage and DuckDB operation."
  },
  {
    "objectID": "slides.html#flowmaps-with-flowmapper-and-flowmapblue",
    "href": "slides.html#flowmaps-with-flowmapper-and-flowmapblue",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Flowmaps with {flowmapper} and {flowmapblue}",
    "text": "Flowmaps with {flowmapper} and {flowmapblue}\n{flowmapblue} (Boyandin 2024) for interactive flowmaps\n{flowmapper} (Mast 2024) for static flowmaps and producing spatial data\n\n\nSource: https://www.flowmap.blue/1Oe3zM219uSfJ3sjdRT90SAK2kU3xIvzdcCW6cwTsAuc  Data: https://opendata.cbs.nl/#/CBS/nl/dataset/83628NED/table?dl=F076"
  },
  {
    "objectID": "slides.html#tutorial-website",
    "href": "slides.html#tutorial-website",
    "title": "Analysing massive open human mobility data using {spanishoddata}, {duckdb}, and flowmaps",
    "section": "Tutorial website",
    "text": "Tutorial website\nhttps://www.ekotov.pro/agit-2025-spanishoddata/"
  },
  {
    "objectID": "markdown-setup.html",
    "href": "markdown-setup.html",
    "title": "Analysing massive open human mobility data in R using spanishoddata, duckdb and flowmaps",
    "section": "",
    "text": "install quarto extensions\nquarto install extension grantmcdermott/quarto-revealjs-clean\nquarto add mcanouil/quarto-iconify\n\n\n\nCitationBibTeX citation:@online{kotov2025,\n  author = {Kotov, Egor},\n  title = {AGIT 2025 {Workshop:} {Analysing} {Massive} {Open} {Human}\n    {Mobility} {Data} in {R} {Using} Spanishoddata, Duckdb and Flowmaps},\n  date = {2025-07-03},\n  url = {https://www.ekotov.pro/agit-2025-spanishoddata/markdown-setup.html},\n  doi = {10.5281/zenodo.15794849},\n  langid = {en}\n}\nFor attribution, please cite this work as:\nKotov, Egor. 2025. ‚ÄúAGIT 2025 Workshop: Analysing Massive Open\nHuman Mobility Data in R Using Spanishoddata, Duckdb and\nFlowmaps.‚Äù July 3, 2025. https://doi.org/10.5281/zenodo.15794849."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "üëã Workshop Introduction",
    "section": "",
    "text": "This website provides supporting materials for the workshop Analysing massive open human mobility data in R using spanishoddata, duckdb and flowmaps which is part of the AGIT 2025 conference held in Salzburg, Austria on July 1-3, 2025. This tutorial is licensed under CC BY 4.0.\nLarge-scale human mobility datasets provide unprecedented opportunities to analyze and gain insights into movement patterns. Such insights are critical for fields ranging from transport planning and epidemiology to socio-spatial inequality research and climate-change mitigation. Until recently, access to human mobility data was a privilege of a few researchers. Thanks to countries like Spain that pioneered to make high-resolution aggregated human mobility data open, such data is becoming increasingly accessible. Thanks to the Multi-MNO project by Eurostat, similar mobility data may soon be widely available as part of official statistics across the European Union. However, the complexity and sheer volume of this data present practical challenges related to data acquisition, efficient processing, geographic disaggregation, network representation, and interactive visualization.\nThe workshop addresses these challenges by showcasing end-to-end workflows that harness newly developed and state-of-the-art R packages and methods. Participants will learn how to acquire and manage multi-gigabyte mobility datasets with {spanishoddata} and duckdb R packages, combine and compare the mobility flows across space and time by creating informative aggregate mobility flows visualizations using {flowmapper} and {flowmapblue} R packages.\n\n  \n    \n  \n    \n    Hourly daily mobility flows for almost 5 full years\n  \n\nSpanish open mobility data is used as a case study. This data contains anonymized and grouped flows between more than 3500 locations in Spain with hourly intervals across more than 3 full years. The flows are further split by age and income groups, sex, and activity type (home, work, regular, irregular) at both origin and destination, thereby presenting a universe of opportunities for analysis and research questions to explore.\n\n  \n    \n  \n      \n    Mobility flows covering all of Spain and beyond\n  \n\nWorkshop participants will use {spanishoddata} R package (Kotov, Lovelace, and Vidal-Tortosa 2024) to access open human mobilty flows (Ministerio de Transportes y Movilidad Sostenible (MITMS) 2024) derived from mobile phones in Spain. They will analyse the data using cutting edge {duckdb} (M√ºhleisen and Raasveldt 2024) and make static and interactive visualisations with {flowmapper} (Mast 2024), {flowmapblue} (Boyandin 2024).\nStay tuned for updates!\n\n\n\n\nReferences\n\nBoyandin, Ilya. 2024. Flowmap.blue Widget for r. https://doi.org/10.32614/CRAN.package.flowmapblue.\n\n\nKotov, Egor, Robin Lovelace, and Eugeni Vidal-Tortosa. 2024. Spanishoddata. https://doi.org/10.32614/CRAN.package.spanishoddata.\n\n\nMast, Johannes. 2024. Flowmapper: Draw Flows (Migration, Goods, Money, Information) on ‚ÄôGgplot2‚Äô Plots. https://github.com/JohMast/flowmapper.\n\n\nMinisterio de Transportes y Movilidad Sostenible (MITMS). 2024. ‚ÄúEstudio de La Movilidad Con Big Data (Study of Mobility with Big Data).‚Äù https://www.transportes.gob.es/ministerio/proyectos-singulares/estudio-de-movilidad-con-big-data.\n\n\nM√ºhleisen, Hannes, and Mark Raasveldt. 2024. Duckdb: DBI Package for the DuckDB Database Management System. https://doi.org/10.32614/CRAN.package.duckdb.\n\nCitationBibTeX citation:@online{kotov2025,\n  author = {Kotov, Egor},\n  title = {AGIT 2025 {Workshop:} {Analysing} {Massive} {Open} {Human}\n    {Mobility} {Data} in {R} {Using} Spanishoddata, Duckdb and Flowmaps},\n  date = {2025-07-03},\n  url = {https://www.ekotov.pro/agit-2025-spanishoddata/},\n  doi = {10.5281/zenodo.15794849},\n  langid = {en}\n}\nFor attribution, please cite this work as:\nKotov, Egor. 2025. ‚ÄúAGIT 2025 Workshop: Analysing Massive Open\nHuman Mobility Data in R Using Spanishoddata, Duckdb and\nFlowmaps.‚Äù July 3, 2025. https://doi.org/10.5281/zenodo.15794849.",
    "crumbs": [
      "üëã Intro"
    ]
  },
  {
    "objectID": "2-flowmapping.html#zones",
    "href": "2-flowmapping.html#zones",
    "title": "üìà Tutorial: Flowmaps",
    "section": "2.1 Zones",
    "text": "2.1 Zones\nGet the zones with:\n\nzones &lt;- spod_get_zones(zones = \"distr\", ver = 2)\n\n\nhead(zones)\n\nSimple feature collection with 6 features and 9 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 485212.1 ymin: 4705413 xmax: 562700.7 ymax: 4784926\nProjected CRS: ETRS89 / UTM zone 30N (N-E)\n# A tibble: 6 √ó 10\n  id       name          population census_sections census_districts\n  &lt;chr&gt;    &lt;chr&gt;              &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;           \n1 01001    Alegr√≠a-Dula‚Ä¶       2925 0100101001; 01‚Ä¶ 0100101         \n2 01002    Amurrio            10307 0100201001; 01‚Ä¶ 0100201         \n3 01004_AM Artziniega a‚Ä¶       3005 0100401001; 01‚Ä¶ 0100401; 0104201\n4 01009_AM Asparrena ag‚Ä¶       4599 0100901001; 01‚Ä¶ 0100901; 010130‚Ä¶\n5 01010    Ayala/Aiara         2951 0101001001; 01‚Ä¶ 0101001         \n6 01017_AM Campezo/Kanp‚Ä¶       4314 0101601001; 01‚Ä¶ 0101601; 010170‚Ä¶\n# ‚Ñπ 5 more variables: municipalities &lt;chr&gt;,\n#   municipalities_mitma &lt;chr&gt;, luas_mitma &lt;chr&gt;,\n#   district_ids_in_v1 &lt;chr&gt;, geom &lt;MULTIPOLYGON [m]&gt;",
    "crumbs": [
      "üìà Tutorial: Flowmaps"
    ]
  },
  {
    "objectID": "2-flowmapping.html#flows",
    "href": "2-flowmapping.html#flows",
    "title": "üìà Tutorial: Flowmaps",
    "section": "2.2 Flows",
    "text": "2.2 Flows\nYou can use the same data as in the previous tutorial:\n\ndates &lt;- c(\"2024-10-23\", \"2024-10-30\", \"2024-11-06\", \"2024-11-27\")\n\n\nflows &lt;- spod_get(\n  type = \"origin-destination\",\n  zones = \"districts\",\n  dates = dates\n)\n\nAlternatively, simply connect to the database, if you converted the data to DuckDB format in the previous tutorial:\n\nflows &lt;- spod_connect(\"data/clean_data/v2/tabular/duckdb/od_distritos.duckdb\")",
    "crumbs": [
      "üìà Tutorial: Flowmaps"
    ]
  },
  {
    "objectID": "2-flowmapping.html#focus-on-valencia",
    "href": "2-flowmapping.html#focus-on-valencia",
    "title": "üìà Tutorial: Flowmaps",
    "section": "4.1 Focus on Valencia",
    "text": "4.1 Focus on Valencia\nFocus on Valencia or choose another city of your choice.\n\nzones_filtered &lt;- zones_coords |&gt;\n  filter(str_detect(real_name, \"Val√®ncia\"))\nhead(zones_filtered)\n\n       x        y    name            real_name\n1 -0.3754488 39.47439 4625001 Val√®ncia distrito 01\n2 -0.3689019 39.46482 4625002 Val√®ncia distrito 02\n3 -0.3857096 39.46848 4625003 Val√®ncia distrito 03\n4 -0.4084497 39.48526 4625004 Val√®ncia distrito 04\n5 -0.3742480 39.48428 4625005 Val√®ncia distrito 05\n6 -0.3601579 39.47474 4625006 Val√®ncia distrito 06",
    "crumbs": [
      "üìà Tutorial: Flowmaps"
    ]
  },
  {
    "objectID": "2-flowmapping.html#create-a-base-map",
    "href": "2-flowmapping.html#create-a-base-map",
    "title": "üìà Tutorial: Flowmaps",
    "section": "5.1 Create a base map",
    "text": "5.1 Create a base map\n\nbase_plot_districts &lt;- zones |&gt;\n  filter(id %in% zones_filtered$name) |&gt;\n  st_transform(4326) |&gt;\n  ggplot() +\n  geom_sf(fill = NA, col = \"grey60\", linewidth = 0.1) +\n  theme_classic(base_size = 20) +\n  labs(title = \"\", subtitle = \"\", fill = \"\", caption = \"\") +\n  theme(\n    axis.line = element_blank(),\n    axis.text = element_blank(),\n    axis.ticks = element_blank(),\n    axis.title = element_blank(),\n    panel.background = element_rect(fill = \"transparent\"),\n    plot.background = element_rect(fill = \"transparent\", color = NA),\n    panel.grid.major = element_blank(),\n    panel.grid.minor = element_blank()\n  ) +\n  guides(fill = \"none\")",
    "crumbs": [
      "üìà Tutorial: Flowmaps"
    ]
  },
  {
    "objectID": "2-flowmapping.html#filter-the-flows",
    "href": "2-flowmapping.html#filter-the-flows",
    "title": "üìà Tutorial: Flowmaps",
    "section": "5.2 Filter the flows",
    "text": "5.2 Filter the flows\n\nflows_aggregated_filtered &lt;- flows_aggregated |&gt;\n  filter(o %in% zones_filtered$name & d %in% zones_filtered$name)",
    "crumbs": [
      "üìà Tutorial: Flowmaps"
    ]
  },
  {
    "objectID": "2-flowmapping.html#plot-the-flows",
    "href": "2-flowmapping.html#plot-the-flows",
    "title": "üìà Tutorial: Flowmaps",
    "section": "5.3 Plot the flows",
    "text": "5.3 Plot the flows\n\nflows_plot_all_districts &lt;- base_plot_districts |&gt;\n  add_flowmap(\n    od = flows_aggregated_filtered,\n    nodes = zones_filtered,\n    node_radius_factor = 1,\n    edge_width_factor = 1,\n    arrow_point_angle = 35,\n    node_buffer_factor = 1.5,\n    outline_col = \"grey80\",\n    add_legend = \"bottom\",\n    legend_col = \"gray20\",\n    legend_gradient = TRUE,\n    k_node = 8 # play around with this parameter to aggregate nodes and flows\n  )\n\n# customise colours for the fill\nflows_plot_all_districts &lt;- flows_plot_all_districts +\n  scale_fill_gradient(\n    low = \"#FABB29\",\n    high = \"#AB061F\",\n    labels = scales::comma_format() # Real value labels\n  )\n\n\nflows_plot_all_districts",
    "crumbs": [
      "üìà Tutorial: Flowmaps"
    ]
  },
  {
    "objectID": "software-setup.html",
    "href": "software-setup.html",
    "title": "üõ†Ô∏è Software setup",
    "section": "",
    "text": "To follow the workshop, you should have the following software installed on your computer:\n\nR and RStudio or another IDE, such as Positron.\n\nAlternatively, you can use RStudio in the web browser by launching this Binder instance for free &gt;&gt; , limited by 1-2 GB of RAM and 1 CPU core. Source repository is at https://github.com/e-kotov/agit-2025-spanishoddata-playground.\n\n\n\n\n1 R packages to install\nPlease install the following R packages with the code below:\n\npackages &lt;- c(\n  \"spanishoddata\",\n  \"flowmapper\",\n  \"flowmapblue\",\n  \"tidyverse\",\n  \"mapview\",\n  \"leafgl\",\n  \"patchwork\",\n  \"sf\",\n  \"basemaps\",\n  \"ggnewscale\"\n)\n\ninstall.packages(packages)\nrm(packages)\n\n\n\n\n\nCitationBibTeX citation:@online{kotov2025,\n  author = {Kotov, Egor},\n  title = {AGIT 2025 {Workshop:} {Analysing} {Massive} {Open} {Human}\n    {Mobility} {Data} in {R} {Using} Spanishoddata, Duckdb and Flowmaps},\n  date = {2025-07-03},\n  url = {https://www.ekotov.pro/agit-2025-spanishoddata/software-setup.html},\n  doi = {10.5281/zenodo.15794849},\n  langid = {en}\n}\nFor attribution, please cite this work as:\nKotov, Egor. 2025. ‚ÄúAGIT 2025 Workshop: Analysing Massive Open\nHuman Mobility Data in R Using Spanishoddata, Duckdb and\nFlowmaps.‚Äù July 3, 2025. https://doi.org/10.5281/zenodo.15794849.",
    "crumbs": [
      "üõ†Ô∏è Software setup"
    ]
  }
]